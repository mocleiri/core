<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Wicket Stuff Wiki : DojoValidationAjaxHandler</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Wicket Stuff Wiki : DojoValidationAjaxHandler
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Feb 03, 2007 by <font color="#0050B2">almaw</font>.
				    </div>

				    <p><br clear="all" /></p>

<h2><a name="DojoValidationAjaxHandler-FXValidationAjaxHandlertutorial"></a>FXValidationAjaxHandler tutorial</h2>


<h3><a name="DojoValidationAjaxHandler-Whatisit%3F"></a>What is it?</h3>

<p>FXValidationAjaxHandler, it's quite a name for a relatively simple handler class,  but you will have to forgive our lack of creativity on naming classes.</p>

<p>So, what does it do? Well it combines 2 of Dojo's greatest features:</p>
<ul>
	<li>The ability to make background server-calls (Ajax)</li>
	<li>The ability to animate a components background color (highlighting).</li>
</ul>


<p>Great, and that will be useful for....?<br/>
In short, it binds the wicket validation process of the FormComponent to an event you can specify  (e.g. onblur, onchange) and highlights the Component based on the outcome of the validation  (valid or invalid).</p>

<h3><a name="DojoValidationAjaxHandler-Makeitwork"></a>Make it work</h3>

<p>Enough with the theory, let's get pragmatic.</p>

<p>To use this handler you need a Form with a Formcomponent that has at least 1 validator bound to it.  It will work with any type of wicket Validator, even custom ones.  Since a RequiredTextField already validates automatically (if component has been filled in),  this will also trigger our effect.</p>

<p>Let's say you have a RequiredTextfield with a typeValidator which checks for integers and an  Integervalidator which checks if the entered value lies between 0 and 100:<br/>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>FormComponent tx;
add(tx = new RequiredTextField("integerInRangeProperty", Integer.class).add(
IntegerValidator.range(0, 100)));
</pre>
</div></div><br clear="all" /></p>

<p>Then you simply add the handler to the TextField like this:<br/>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>tx.add(new FXValidationAjaxHandler("onblur"));
</pre>
</div></div><br clear="all" /></p>

<p>This will trigger wicket validation (in this case: required, type and range)  to check the value you entered every onblur and it will highlight the textfield based  on the validation result. Since we used the default constructor (only takes an event name),  the default color is used when the value is invalid, and the component's CSS style background  color is used when the value is valid.</p>

<h3><a name="DojoValidationAjaxHandler-Makeitwork...yourway"></a>Make it work ... your way</h3>

<p>By using different constructors you can specify different colors to which the component  should highlight when the value is valid or invalid.<br/>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>/* Default constructor which uses node's current
background color when component is valid./
public FXValidationAjaxHandler(String eventName)

/**
Constructor which sets default valid highlight color /
public FXValidationAjaxHandler(String eventName, boolean colorValid)

/**
Constructor with custom invalid RGB values. /
public FXValidationAjaxHandler(String eventName, int r, int g, int b)

/**
Constructor with custom invalid RGB values and valid RGB values./
public FXValidationAjaxHandler(String eventName, int ir, int ig, int ib, int vr, int vg, int vb)
</pre>
</div></div><br clear="all" /></p>

<p>Here is the screenshot of the handler in action in the example we discussed earlier.  In this case a single "n" is entered and we move on to the next field.  The validation fails because "n" is not a valid integer and the field turns red.
<br clear="all" />  <img src="download/attachments/1310729/validator.gif" align="absmiddle" border="0"/><br/>
&nbsp;<br/>
If we had changed "n" to a valid integer between 0 and 100 and we would have left the field again,  the field would change back to it's original background color. </p>

				    					    <br/>
                        <div class="tabletitle">
                            <a name="attachments">Attachments:</a>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="download/attachments/1310729/validator.gif">validator.gif</a> (image/gif)
                                <br/>
                                                    </div>
				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="http://wicketstuff.org/confluence/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Apr 11, 2011 12:08</font></td>
		    </tr>
	    </table>
    </body>
</html>